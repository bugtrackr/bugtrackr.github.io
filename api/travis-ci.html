---
title: Travis CI API
subtitle: 
project: API

layout: default
# rightsidebar: 1

permalink: /api/travis-ci/index.html
gh-file: /api/travis-ci.html
---
<p>The API has different modes: <code>travisci</code> is to use <a href="https://docs.travis-ci.com/user/notifications/#Webhook-notification">Travis CI webhooks</a>. This will create a new issue, whenever the webhook is triggered.</p>

<p>You can choose this mode by setting the the GET parameter <code>XMODE</code> of your request to <code>travisci</code>.</p>

<h2 id="request">Request</h2>

<p>Add the URL to your <code>.travis.yml</code> file for a webhook:</p>

<pre class="prettyprint lang=php">
notifications:
  webhooks:
    urls:
      - https://example.com/index.php?project=PROJECTNAME&amp;page=api&amp;XMODE=travisci
    on_success: [always|never|change] # default: always
    on_failure: [always|never|change] # default: always
    on_start: [always|never|change] # default: never
</pre>

<p>Webhooks are delivered with a <code>application/x-www-form-urlencoded</code> content type using HTTP POST, with the body including a <code>payload</code> parameter that contains the JSON webhook payload in a URL-encoded format.</p>

<p>See <a href="https://gist.github.com/roidrage/9272064#file-gistfile1-json">example payload</a> and <a href="https://docs.travis-ci.com/user/notifications/#Webhook-notification">webhook docs</a>.</p>

<h2 id="authentication">Authentication</h2>

<p>When Travis CI makes the POST request, a header named <code>Authorization</code> is included. Its value is the SHA2 hash of the GitHub username, the name of the repository, and your Travis CI token.</p>

<pre class="prettyprint lang=php">
sha256('USERNAME/REPOSITORY'.'TRAVIS_TOKEN')
</pre>

<p>Open <code>database/api_config.php</code> and add the following to the <code>$API_ACCESS</code> array:</p>

<pre class="prettyprint lang=php">
"travis-REPOSITORY" =&gt; array(
	"mode" =&gt; "travisci", // XMODE travisci
	// generate key with /classes/api/keygen-travisci.php
	"key" =&gt; "ca978112ca1bbdcafac231b39a23dc4da786eff8147c4e72b9807785afee48bb", 
	// comma seperated list of projects or "ALL_PROJECTS"
	"projects" =&gt; "ALL_PROJECTS",
),
</pre>

<p>The <strong>username</strong> has to be <code>travis-REPOSITORY</code> where you replace REPOSITORY with the name of your GitHub repository.</p>
<p>Replace the <strong>key</strong> with the Authorization header sent by Travis CI which can be generated by opening <code>/classes/api/keygen-travisci.php</code> in your browser.</p>
<p>For the <strong>projects</strong> settings see default API.</p>

<h2 id="response">Response</h2>
<p>Same response as for default API.</p>