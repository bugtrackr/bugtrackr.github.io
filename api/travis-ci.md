---
title: Travis CI API
subtitle: 
project: API

layout: default
# rightsidebar: 1

permalink: /api/travis-ci/index.html
gh-file: /api/travis-ci.md
---
The API has different modes: `travisci` is to use [Travis CI webhooks](https://docs.travis-ci.com/user/notifications/#Webhook-notification).
You can choose this mode by setting the the GET parameter `XMODE` of your request to `travisci`. This parameter is not required if you use the default mode (see above).

## Request

Add the URL to your `.travis.yml` file for a webhook:

```
notifications:
  webhooks:
    urls:
      - https://example.com/index.php?project=PROJECTNAME&page=api&XMODE=travisci
    on_success: [always|never|change] # default: always
    on_failure: [always|never|change] # default: always
    on_start: [always|never|change] # default: never
```

Webhooks are delivered with a `application/x-www-form-urlencoded` content type using HTTP POST, with the body including a `payload` parameter that contains the JSON webhook payload in a URL-encoded format.

See [example payload](https://gist.github.com/roidrage/9272064#file-gistfile1-json) and [webhook docs](https://docs.travis-ci.com/user/notifications/#Webhook-notification).

## Authentication

When Travis CI makes the POST request, a header named `Authorization` is included. Its value is the SHA2 hash of the GitHub username (see below), the name of the repository, and your Travis CI token.

```
sha256('USERNAME/REPOSITORYTRAVIS_TOKEN')
```

Open `database/api_config.php` and add the following to the `$API_ACCESS` array:

```
    "travis-REPOSITORY" => array(
    	"mode" => "travisci", // XMODE travisci
    	"key" => "ca978112ca1bbdcafac231b39a23dc4da786eff8147c4e72b9807785afee48bb", // generate key with /classes/api/keygen-travisci.php
    	"projects" => "ALL_PROJECTS", // comma seperated list of projects or "ALL_PROJECTS"
    ),

```

The **username** has to be `travis-REPOSITORY` where you replace REPOSITORY with the name of your GitHub repository.

Replace the **key** with the Authorization header sent by Travis CI which can be generated by opening `/classes/api/keygen-travisci.php` in your browser.

For the **projects** settings see default API.

## Response

Same response as for default API.
